const staticCacheName="restaurant-cache-v1",OFFLINE_URL="offline.html",filesToCache=["/","./manifest.json","./index.html","./404.html","./offline.html","./restaurant.min.html","./css/styles.min.css","./js/lazyload.min.js","./js/idb.min.js","./js/dbhelper.min.js","./js/main.min.js","./js/restaurant_info.min.js","./data/restaurants.json","./img/1.jpg","./img/2.jpg","./img/3.jpg","./img/4.jpg","./img/5.jpg","./img/6.jpg","./img/7.jpg","./img/8.jpg","./img/9.jpg","./img/10.jpg","./img/large/1.jpg","./img/large/2.jpg","./img/large/3.jpg","./img/large/4.jpg","./img/large/5.jpg","./img/large/6.jpg","./img/large/7.jpg","./img/large/8.jpg","./img/large/9.jpg","./img/large/10.jpg","./img/restaurant-icon.png"];self.addEventListener("install",function(e){console.log("[ServiceWorker] Install"),e.waitUntil(caches.open(staticCacheName).then(function(cache){return console.log("Cache is opened"),cache.addAll(filesToCache)}))}),self.addEventListener("active",function(e){e.waitUntil(caches.keys().then(function(cacheNames){return Promise.all(cacheNames.filter(function(cacheName){return console.log(cacheName),cacheName.startsWith("restaurant-")&&cacheName!=staticCacheName}).map(function(cacheName){return caches.delete(cacheName)}))}))}),self.addEventListener("message",function(e){"skipWaiting"===e.data.action&&self.skipWaiting()}),self.addEventListener("fetch",function(event){event.respondWith(caches.match(event.request,{ignoreSearch:!0}).then(function(resp){return resp||fetch(event.request).then(function(response){if(404===response.status)return caches.match("404.html");let responseClone=response.clone();return caches.open("restaurant-cache-v2").then(function(cache){cache.put(event.request,responseClone)}),response})}).catch(function(){return caches.match(OFFLINE_URL)}))});